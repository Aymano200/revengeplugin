(function(s,o,d,u,a,n,m,E){"use strict";const{View:f,ScrollView:h}=o.ReactNative;function p(){return m.useProxy(n.storage),o.React.createElement(h,null,o.React.createElement(f,null,o.React.createElement(E.Forms.FormSwitchRow,{label:"Remove blocked messages",value:n.storage.blocked??!0,onValueChange:function(t){return n.storage.blocked=t},note:""}),o.React.createElement(E.Forms.FormSwitchRow,{label:"Remove ignored messages",value:n.storage.ignored??!0,onValueChange:function(t){return n.storage.ignored=t},note:""})))}const y=u.findByName("RowManager"),S=u.findByProps("getRelationships","isBlocked","isIgnored"),r="HideBlockedAndIgnoredMessages";function A(t,c){let e={id:"",type:0,content:"",channel_id:c.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof t=="string"?e.content=t:e={...e,...t},e}const l=function(t){return t?!!(n.storage.blocked&&S.isBlocked(t)||n.storage.ignored&&S.isIgnored(t)):!1};let i=[];const R=function(){try{const t=d.before("dispatch",o.FluxDispatcher,function([e]){if(e.type==="LOAD_MESSAGES_SUCCESS"&&(e.messages=e.messages.filter(function(g){return!l(g?.author?.id)})),e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE"){let g=e.message;l(g?.author?.id)&&(e.channelId="0")}});i.push(t);const c=d.before("generate",y.prototype,function([e]){l(e.message?.author?.id)&&(e.renderContentOnly=!0,e.message.content=null,e.message.reactions=[],e.message.canShowComponents=!1,e.rowType===2&&(e.roleStyle="",e.text="[Filtered message. Check plugin settings.]",e.revealed=!1,e.content=[]))});i.push(c),a.logger.log(`${r} loaded.`)}catch(t){a.logger.error(`[${r} Error]`,t)}};var b={onLoad:function(){a.logger.log(`Loading ${r}...`),n.storage.blocked??=!0,n.storage.ignored??=!0;for(let t of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])a.logger.log(`Dispatching ${t} to enable handler.`),o.FluxDispatcher.dispatch({type:t,message:A("PLACEHOLDER",{id:"0"}),messages:[]});R()},onUnload:function(){a.logger.log(`Unloading ${r}...`);for(let t of i)t();a.logger.log(`${r} unloaded.`)},settings:p};return s.default=b,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.plugin,vendetta.storage,vendetta.ui.components);
