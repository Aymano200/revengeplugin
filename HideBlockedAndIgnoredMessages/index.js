(function(s,o,c,d,n,u,l){"use strict";const{View:g,ScrollView:m}=o.ReactNative;function E(){return u.useProxy(n.storage),o.React.createElement(m,null,o.React.createElement(g,null,o.React.createElement(l.Forms.FormSwitchRow,{label:"Remove blocked messages",value:n.storage.blocked??!0,onValueChange:function(t){return n.storage.blocked=t},note:""}),o.React.createElement(l.Forms.FormSwitchRow,{label:"Remove ignored messages",value:n.storage.ignored??!0,onValueChange:function(t){return n.storage.ignored=t},note:""})))}const S=d.findByName("RowManager"),{isBlocked:f,isIgnored:h}=d.findByProps("isBlocked","isIgnored");function v(t,e){let r={id:"",type:0,content:"",channel_id:e.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof t=="string"?{...r,content:t}:{...r,...t}}const i=function(t){return t?n.storage.blocked&&f(t)||n.storage.ignored&&h(t):!1};let a=[];const p=function(){a.push(c.before("dispatch",o.FluxDispatcher,function(t){let[e]=t;e.type==="LOAD_MESSAGES_SUCCESS"&&(e.messages=e.messages.filter(function(r){return!i(r?.author?.id)})),(e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE")&&i(e.message?.author?.id)&&(e.channelId="0")})),a.push(c.before("generate",S.prototype,function(t){let[e]=t;i(e.message?.author?.id)&&(e.renderContentOnly=!0,e.message.content=null,e.message.reactions=[],e.message.canShowComponents=!1,e.rowType===2&&(e.roleStyle="",e.text="[Filtered message. Check plugin settings.]",e.revealed=!1,e.content=[]))}))};var y={onLoad:function(){n.storage.blocked??=!0,n.storage.ignored??=!0;for(const t of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])o.FluxDispatcher.dispatch({type:t,message:v("PLACEHOLDER",{id:"0"}),messages:[]});p()},onUnload:function(){a.forEach(function(t){return t()}),a=[]},settings:E};return s.default=y,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components);
