(function(s,o,g,u,r,n,S,E){"use strict";const{View:m,ScrollView:f}=o.ReactNative;function h(){return S.useProxy(n.storage),o.React.createElement(f,null,o.React.createElement(m,null,o.React.createElement(E.Forms.FormSwitchRow,{label:"Remove blocked messages",value:n.storage.blocked??!0,onValueChange:function(t){return n.storage.blocked=t},note:""}),o.React.createElement(E.Forms.FormSwitchRow,{label:"Remove ignored messages",value:n.storage.ignored??!0,onValueChange:function(t){return n.storage.ignored=t},note:""})))}const p=u.findByName("RowManager"),{isBlocked:y,isIgnored:A}=u.findByProps("isBlocked","isIgnored"),a="HideBlockedAndIgnoredMessages";function b(t,c){let e={id:"",type:0,content:"",channel_id:c.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof t=="string"?e.content=t:e={...e,...t},e}const l=function(t){return t?!!(n.storage.blocked&&y(t)||n.storage.ignored&&A(t)):!1};let i=[];const v=function(){try{const t=g.before("dispatch",o.FluxDispatcher,function([e]){if(e.type==="LOAD_MESSAGES_SUCCESS"&&(e.messages=e.messages.filter(function(d){return!l(d?.author?.id)})),e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE"){let d=e.message;l(d?.author?.id)&&(e.channelId="0")}});i.push(t);const c=g.before("generate",p.prototype,function([e]){l(e.message?.author?.id)&&(e.renderContentOnly=!0,e.message.content=null,e.message.reactions=[],e.message.canShowComponents=!1,e.rowType===2&&(e.roleStyle="",e.text="[Filtered message. Check plugin settings.]",e.revealed=!1,e.content=[]))});i.push(c),r.logger.log(`${a} loaded.`)}catch(t){r.logger.error(`[${a} Error]`,t)}};var R={onLoad:function(){r.logger.log(`Loading ${a}...`),n.storage.blocked??=!0,n.storage.ignored??=!0;for(let t of["MESSAGE_CREATE","MESSAGE_UPDATE","LOAD_MESSAGES","LOAD_MESSAGES_SUCCESS"])r.logger.log(`Dispatching ${t} to enable handler.`),o.FluxDispatcher.dispatch({type:t,message:b("PLACEHOLDER",{id:"0"}),messages:[]});v()},onUnload:function(){r.logger.log(`Unloading ${a}...`);for(let t of i)t();r.logger.log(`${a} unloaded.`)},settings:h};return s.default=R,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.plugin,vendetta.storage,vendetta.ui.components);
